{"version":3,"sources":["map_index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map_index.js","sourcesContent":["/**\r\n* @fileoverview Manipulating Google Maps API to create \"bikeways\"\r\n*\r\n* @author Marco GÃ³mez\r\n* @version 0.1\r\n*/\r\nvar polis=[];\r\nvar map;\r\nvar infowindow;\r\nfunction initialize() {\r\n  var myLatLng = new google.maps.LatLng( 20.659699, -103.349609);\r\n  infowindow = new google.maps.InfoWindow();\r\n  var mapOptions = {\r\n    zoom: 13,\r\n    center: myLatLng,\r\n    mapTypeId: google.maps.MapTypeId.TERRAIN\r\n  };\r\n\r\n  var bermudaTriangle;\r\n\r\n  map = new google.maps.Map(document.getElementById('map'),\r\n    mapOptions);\r\n\r\n\r\n  /*RUTAS*/\r\n    $.ajax(\r\n  {\r\n    url : '/api/getAllRoute',\r\n    type: \"GET\",\r\n    success:function(data) \r\n    {\r\n      $parseData=JSON.parse(data);\r\n      $.each($parseData.data, function(i, item) {\r\n        var instring = google.maps.geometry.encoding.decodePath(item.encodepath);\r\n        var routeCoordinates = Array();\r\n        var points = instring;\r\n\r\n        for (i = 0; i < points.length; i++) {\r\n          var p = new google.maps.LatLng(points[i][0], points[i][1]);\r\n          routeCoordinates.push(p);\r\n        }\r\n        var lineSymbol = {\r\n          path: google.maps.SymbolPath.FORWARD_OPEN_ARROW,\r\n          scale: 2.2,\r\n          strokeColor: \"#FFF\",\r\n          strokeOpacity: 1\r\n        };\r\n\r\n        var routePath = new google.maps.Polyline({\r\n          path: points,\r\n          interpolate: true,\r\n          icons: [{\r\n            icon: lineSymbol,\r\n            offset: '50%',\r\n            repeat: '240px'\r\n          }],\r\n          strokeColor: item.color,\r\n          strokeOpacity: 0.7,\r\n          strokeWeight: 8\r\n        });\r\n        google.maps.event.addListener(routePath, 'mouseover', function(event) {\r\n          infowindow.open(map);\r\n          infowindow.setContent(item.code);\r\n          infowindow.setPosition(event.latLng);\r\n        });\r\n        google.maps.event.addListener(routePath, 'mouseout', function() {\r\n            infowindow.close();\r\n        });\r\n        routePath.setMap(map);\r\n        polis.push(routePath);\r\n\r\n      });\r\n\r\n    },\r\n    error: function(jqXHR, textStatus, errorThrown) \r\n    {\r\n      console.log(\"No se pudieron cargar los datos\");\r\n    }\r\n  });\r\n    /*CICLOVIAS*/\r\n  $.ajax(\r\n  {\r\n    url : '/api/getAllCiclovia',\r\n    type: \"GET\",\r\n    success:function(data) \r\n    {\r\n      $parseData=JSON.parse(data);\r\n      //console.log($parseData);\r\n      $.each($parseData.data, function(i, item) {\r\n        var instring = google.maps.geometry.encoding.decodePath(item.encodepath);\r\n        var routeCoordinates = Array();\r\n        var points = instring;\r\n\r\n        for (i = 0; i < points.length; i++) {\r\n          var p = new google.maps.LatLng(points[i][0], points[i][1]);\r\n          routeCoordinates.push(p);\r\n        }\r\n        var lineSymbol = {\r\n          path: google.maps.SymbolPath.FORWARD_OPEN_ARROW,\r\n          scale: 2.2,\r\n          strokeColor: \"#FFF\",\r\n          strokeOpacity: 1\r\n        };\r\n\r\n        var routePath = new google.maps.Polyline({\r\n          path: points,\r\n          interpolate: true,\r\n          icons: [{\r\n            icon: lineSymbol,\r\n            offset: '50%',\r\n            repeat: '240px'\r\n          }],\r\n          strokeColor: item.color,\r\n          strokeOpacity: 0.7,\r\n          strokeWeight: 8\r\n        });\r\n\r\n\r\n        google.maps.event.addListener(routePath, 'mouseover', function(event) {\r\n          infowindow.open(map);\r\n          infowindow.setContent(item.name);\r\n          infowindow.setPosition(event.latLng);\r\n        });\r\n        google.maps.event.addListener(routePath, 'mouseout', function() {\r\n            infowindow.close();\r\n        });\r\n        routePath.setMap(map);\r\n        polis.push(routePath);\r\n\r\n      });\r\n\r\n    },\r\n    error: function(jqXHR, textStatus, errorThrown) \r\n    {\r\n      console.log(\"No se pudieron cargar los datos\");\r\n    }\r\n  });\r\n}\r\n\r\ngoogle.maps.event.addDomListener(window, 'load', initialize);"]}