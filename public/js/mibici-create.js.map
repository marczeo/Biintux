{"version":3,"sources":["mibici-create.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mibici-create.js","sourcesContent":["var lat;\r\nvar lng;\r\nvar marker;\r\nvar map;\r\n\r\nfunction initialize() \r\n{\r\n  var myLatLng = new google.maps.LatLng( 20.659699, -103.349609);\r\n\r\n  var mapOptions = \r\n  {\r\n\r\n    zoom: 13,\r\n    center: myLatLng,\r\n    mapTypeId: google.maps.MapTypeId.TERRAIN,\r\n    styles: [\r\n      {\r\n        \"featureType\": \"poi\",\r\n        stylers: [\r\n          { hue: \"#3097D1\" },\r\n          { saturation: 60 },\r\n          { lightness: -20 },\r\n          { gamma: 1.51 }\r\n        ]\r\n      }\r\n    ]\r\n    \r\n  };\r\n\r\n  var bermudaTriangle;\r\n\r\n  map = new google.maps.Map(document.getElementById('map'),\r\n    mapOptions);\r\n\r\n  $.ajax(\r\n    {\r\n        success:function(data) \r\n        {\r\n          console.log(data);\r\n          data.forEach(function(item){\r\n            console.log(item.encodepath);\r\n            var bermudaTrianglex = new google.maps.Polygon({\r\n              paths: google.maps.geometry.encoding.decodePath(item.encodepath),\r\n              strokeColor: '#FF0000',\r\n              strokeOpacity: 0.8,\r\n              strokeWeight: 2,\r\n              fillColor: '#FF0000',\r\n              fillOpacity: 0.35\r\n             });\r\n            bermudaTrianglex.setMap(map);\r\n\r\n          });\r\n\r\n        },\r\n        error: function(jqXHR, textStatus, errorThrown) \r\n        {\r\n            //if fails      \r\n        }\r\n    });\r\n\r\n  geocoder = new google.maps.Geocoder();\r\n\r\n  //Instantiate an info window to hold step text.\r\n  stepDisplay = new google.maps.InfoWindow();\r\n\r\n  lat = 20.659699;\r\n  lng = -103.349609;\r\n\r\n\r\n  marker = new google.maps.Marker\r\n  ({\r\n    position: myLatLng,\r\n    icon: '/images/mibici.svg',\r\n    label: \"\",\r\n    map: map,\r\n    draggable: true,\r\n    title: \"Marcador\",\r\n    myData: \"markerFrom\",\r\n    animation: google.maps.Animation.DROP\r\n  });\r\n            \r\n\r\n  marker.addListener('dragend', moveMarkerEvent);\r\n    google.maps.event.addListener(marker, \"dblclick\", function (event) \r\n    {\r\n      getAddress(this.position, this.title);\r\n\r\n      map.setCenter(this.getPosition());\r\n      map.setZoom(14);\r\n\r\n    });\r\n\r\n  getAddress(marker.position, 'markerFrom');\r\n\r\n  //getAddress(marker.position, marker.title);\r\n\r\n}\r\n\r\n/////Aqui\r\nfunction getAddress(latLng, idInput)\r\n{\r\n  geocoder.geocode({\r\n    latLng: latLng\r\n  }, function(responses) \r\n  {\r\n    if (responses && responses.length > 0) \r\n    {      \r\n      document.getElementById(idInput+'Lat').value = latLng.lat();\r\n      document.getElementById(idInput+'Lang').value = latLng.lng();\r\n      document.getElementById(idInput+'Address').value = responses[0].formatted_address;\r\n\r\n    } else {\r\n      document.getElementById(idInput).value = 'Cannot determine address at this location.';\r\n    }\r\n  });\r\n}\r\n\r\nfunction moveMarkerEvent(event) \r\n{\r\n  var idMarker=this.myData;  \r\n\r\n  document.getElementById(idMarker+'Lat').value = event.latLng.lat();\r\n  document.getElementById(idMarker+'Lang').value = event.latLng.lng();\r\n  document.getElementById(idMarker+'Address').value = event.formatted_address;\r\n\r\n  getAddress(event.latLng, idMarker+'Address');\r\n\r\n  origin=\r\n  {\r\n    lat: parseFloat(document.getElementById('markerFromLat').value),\r\n    lng: parseFloat(document.getElementById('markerFromLang').value)\r\n  }; \r\n}\r\n\r\ngoogle.maps.event.addDomListener(window, 'load', initialize);\r\n"]}