{"version":3,"sources":["user.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.js","sourcesContent":["/*\r\n * Mostrar selecciÃ³n de ruta cuando el usuario a agregar es concesionario\r\n*/\r\n$( \"#select_role\" ).change(function() {\r\n\t if($( \"#select_role option:selected\" ).text() == \"Concessionaire\" || $( \"#select_role option:selected\" ).text() == \"Concesionario\") {\r\n\t\t$(\"#route_container\").addClass('show');\r\n\t\t$(\"#bus_container\").removeClass('show');\r\n\t\t$(\"#concessionaire_container\").removeClass('show');\r\n\t}\r\n\telse if($(\"#select_role option:selected\" ).text() == \"Driver\" || $(\"#select_role option:selected\" ).text() == \"Conductor\")\r\n\t{\r\n\t\t$(\"#route_container\").addClass('show');\r\n\t\t$(\"#bus_container\").addClass('show');\r\n\t\t$(\"#concessionaire_container\").addClass('show');\r\n\t}\r\n\telse{\r\n\t\t$(\"#route_container\").removeClass('show');\r\n\t\t$(\"#bus_container\").removeClass('show');\r\n\t\t$(\"#concessionaire_container\").removeClass('show');\r\n\t}\r\n});\r\n$( \"#select_route\" ).change(event => {\r\n\t$.get('/route/'+event.target.value+'/getConcesionarios',function (res, sta) {\r\n\t\tvar default_opt=$(\"#select_concessionaire option:first-child\").val();\r\n\t\t$(\"#select_concessionaire\").empty();\r\n\t\t$(\"#select_concessionaire\").append('<option selected disabled>'+default_opt+'</option>');\r\n\t\t//console.log(res);\r\n\t\tres.forEach(element=>{\r\n\t\t\t//console.log(element);\r\n\t\t\t$(\"#select_concessionaire\").append('<option value=\"'+element.id+'\">'+element.name+'</option>');\r\n\t\t});\r\n\t});\r\n});\r\n$(\"#select_concessionaire\").change(event=>{\r\n\t$.get('/route/'+event.target.value+'/getBuses',function (res, sta) {\r\n\t\tvar default_opt=$(\"#select_bus option:first-child\").val();\r\n\t\t$(\"#select_bus\").empty();\r\n\t\t$(\"#select_bus\").append('<option selected disabled>'+default_opt+'</option>');\r\n\t\t//console.log(res);\r\n\t\tres.forEach(element=>{\r\n\t\t\t//console.log(element);\r\n\t\t\t$(\"#select_bus\").append('<option value=\"'+element.id+'\">'+element.economic_number+'</option>');\r\n\t\t});\r\n\t});\r\n});\r\nvar map;\r\nvar infowindow;\r\nvar marcadores=[];\r\nfunction initialize() {\r\n  var myLatLng = new google.maps.LatLng( 20.659699, -103.349609);\r\n  infowindow = new google.maps.InfoWindow();\r\n  var mapOptions = {\r\n    zoom: 13,\r\n    center: myLatLng,\r\n    mapTypeId: google.maps.MapTypeId.TERRAIN\r\n  };\r\n\r\n\r\n  map = new google.maps.Map(document.getElementById('map'),\r\n    mapOptions);\r\n\r\n\r\n  loadData();\r\n\r\n\r\n}\r\nfunction loadData()\r\n{\r\n  for (var i=0; i<marcadores.length; i++) {\r\n     \r\n        marcadores[i].setMap(null);\r\n    }\r\n    marcadores=[];\r\n  $.ajax(\r\n  {\r\n    url : '/getAllLocation',\r\n    type: \"GET\",\r\n    success:function(data) \r\n    {\r\n      $parseData=JSON.parse(data);\r\n      //console.log($parseData);\r\n      $.each($parseData.data, function(i, item) {\r\n        console.log(item.name);\r\n        var location= new google.maps.LatLng( parseFloat(item.latitude),parseFloat(item.longitude));\r\n        var marker = new google.maps.Marker({\r\n          position: location,\r\n          //label: item.name,\r\n          title: item.name,\r\n          map: map\r\n        });\r\n        marcadores[i]=marker;\r\n        google.maps.event.addListener(marker, 'mouseover', function(event) {\r\n          infowindow.open(map);\r\n          if(item.name==\"\")\r\n            infowindow.setContent(\"User\");\r\n          else\r\n            infowindow.setContent(item.name);\r\n          infowindow.setPosition(event.latLng);\r\n        });\r\n        google.maps.event.addListener(marker, 'mouseout', function() {\r\n            infowindow.close();\r\n        });\r\n\r\n      });\r\n\r\n    },\r\n    error: function(jqXHR, textStatus, errorThrown) \r\n    {\r\n      console.log(\"No se pudieron cargar los datos\");\r\n    }\r\n  });\r\n}\r\ngoogle.maps.event.addDomListener(window, 'load', initialize);\r\nwindow.setInterval(function(){\r\n  loadData();\r\n}, 2000);"]}